#!/usr/bin/env node

/**
 * Command line interface of {{signature.name}}.
 */

"use strict";

var program = require('commander'),
    pkg = require('../package'),
    {{camelcase signature.name}} = require('../lib');

program
    .version(pkg['version']);

{{#each signature.commands}}
//=========================
// Handle `{{name}}` command
//=========================
program
    .command("{{name}} {{#each args}}{{#if optional}}[{{name}}]{{else}}<{{name}}>{{/if}}, {{/each}}")
    .description("{{{desc}}}")
{{#each options}}
    .option('-{{short}}, --{{name}}{{#if type}} {{#if optional}}[{{name}}]{{else}}<{{name}}>{{/if}}{{/if}}', "{{{desc}}}")
{{/each}}
    .action(function act({{#each args}}{{name}}, {{/each}}options) {
        {{camelcase ../signature.name}}.{{camelcase name}}({{#each args}}{{name}}, {{/each}}options, _done);
    });
{{/each}}

/** When command done. */
function _done(err) {
    if (err) {
        console.error(err);
        process.exit(1);
    } else {
        process.exit(0);
    }
}

program.parse(process.argv);